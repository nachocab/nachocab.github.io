<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <base target="_blank"> <!-- open all links on a new tab -->

    <title>BCL2L14 - Array</title>

    <link href="clickme_assets/bootstrap-tooltip.css" rel="stylesheet">
<link href="clickme_assets/clickme.css" rel="stylesheet">
<script src="clickme_assets/d3.v3.js"></script>
<script src="clickme_assets/d3_aux.js"></script>
<script src="clickme_assets/jquery.min.js"></script>
<script src="clickme_assets/bootstrap-tooltip.v2_3.js"></script>

  </head>

  <body>
    <script type="text/javascript">
(function() {
  var clip, color_legend_counts, color_scale, color_title, data, g_color_legend, g_points, g_toggle_names, opacity, plot, point_names, points, radius, redraw, sidebar, toggle_names, toggle_points, transform;

  data = [{"x":-0.0597348396666348,"y":1.73639650227664,"point_name":"1"},
{"x":0.0545025135576725,"y":1.75204844781944,"point_name":"2"},
{"x":0.0721905425190926,"y":1.69460519893357,"point_name":"3"},
{"x":-0.11989938436076,"y":1.69897000433602,"point_name":"4"},
{"x":0.0883232327923179,"y":1.71180722904119,"point_name":"5"},
{"x":0.0123412989266217,"y":1.72427586960079,"point_name":"6"},
{"x":0.0766782439872623,"y":1.70329137811866,"point_name":"7"},
{"x":-0.0341595456562936,"y":1.72427586960079,"point_name":"8"},
{"x":0.07969607854262,"y":1.69897000433602,"point_name":"9"},
{"x":0.0875967996753752,"y":1.69897000433602,"point_name":"10"},
{"x":-0.0850246955640614,"y":1.72427586960079,"point_name":"11"},
{"x":0.0392661187984049,"y":1.75587485567249,"point_name":"12"},
{"x":-0.105354271475226,"y":1.70757017609794,"point_name":"13"},
{"x":-0.113378618359566,"y":1.68124123737559,"point_name":"14"},
{"x":0.0795159062370658,"y":1.69019608002851,"point_name":"15"},
{"x":0.0849194348976016,"y":1.68124123737559,"point_name":"16"},
{"x":0.0256593633815646,"y":1.72835378202123,"point_name":"17"},
{"x":-0.0660513557866216,"y":1.94448267215017,"point_name":"18"},
{"x":3.08789664471522,"y":1.7481880270062,"point_name":"19"},
{"x":3.07019276065752,"y":1.77815125038364,"point_name":"20"},
{"x":2.89355635179207,"y":1.72015930340596,"point_name":"21"},
{"x":2.9824611511454,"y":1.83884909073726,"point_name":"22"},
{"x":6.0184798964113,"y":2.03542973818455,"point_name":"23"},
{"x":6.02585828343406,"y":1.81291335664286,"point_name":"24"},
{"x":6.08509669538587,"y":1.92427928606188,"point_name":"25"},
{"x":5.9455122616142,"y":1.82607480270083,"point_name":"26"},
{"x":5.93975264512002,"y":1.72015930340596,"point_name":"27"},
{"x":6.09171656448394,"y":1.88081359228079,"point_name":"28"},
{"x":8.0345702453889,"y":1.76715586608218,"point_name":"29"},
{"x":8.04486884796992,"y":1.87215627274829,"point_name":"30"},
{"x":7.99608224011958,"y":1.89209460269048,"point_name":"31"},
{"x":7.88187702680007,"y":1.72427586960079,"point_name":"32"},
{"x":9.98719429893419,"y":1.80277372529198,"point_name":"33"},
{"x":9.88942766310647,"y":1.88649072517248,"point_name":"34"},
{"x":9.98304836370051,"y":1.78532983501077,"point_name":"35"},
{"x":9.95440763927996,"y":1.77815125038364,"point_name":"36"},
{"x":9.92613590590656,"y":1.76342799356294,"point_name":"37"},
{"x":9.92849465347826,"y":1.72427586960079,"point_name":"38"},
{"x":12.0672023154795,"y":1.89209460269048,"point_name":"39"},
{"x":12.0432294110768,"y":1.91907809237607,"point_name":"40"},
{"x":12.056789080929,"y":1.85733249643127,"point_name":"41"}];

  radius = 5;

  color_scale = d3.scale.ordinal().range(["#000"]);;

  opacity = null;

  color_title = null;

  color_legend_counts = [];

  plot = new_plot({
    width: 500,
    height: 500,
    padding: {"top":150,"right":400,"bottom":70,"left":100},
    xlab: "Day post-infection",
    ylab: "Expression (log2)",
    rotate_label: {
      y: true
    },
    title: "BCL2L14 - Array",
    subtitle: "(BCL2-like 14 (apoptosis facilitator))",
    box: false,
    xlim: null,
    ylim: null,
    data_ranges: {
          x: [-0.11989938436076,12.0672023154795],
          y: [1.68124123737559,2.03542973818455]
        },
    categorical_domains: {
          x: null,
          y: null
        },
    jitter: 0,
    ordinal_scale_padding: 1,
    linear_scale_padding: 40
  });

  plot.tooltip_text = function(d) {
    return "<strong>" + d.point_name + "</strong>" + "<br>" + "Expression (log2): " + format_property(d.y) + "<br>" + "Day post-infection: " + format_property(d.x);
  };

  plot.center.append("defs").append("clipPath").attr("id", "clip").append("rect").attr({
    "width": plot.width,
    "height": plot.height
  });

  clip = plot.center.append("g").attr("clip-path", "url(#clip)");

  if (plot.zoom) {
    clip.append("rect").style({
      "cursor": "move"
    }).attr({
      "class": "overlay",
      "width": plot.width,
      "height": plot.height,
      "fill": "none",
      "pointer-events": "all"
    }).call(d3.behavior.zoom().x(plot.scales.x).y(plot.scales.y).scaleExtent([1, Infinity]).on("zoom", function() {
      return redraw();
    }));
    redraw = function() {
      plot.select(".x.axis").call(plot.axes.x);
      plot.select(".y.axis").call(plot.axes.y);
      return g_points.attr("transform", transform);
    };
  }

  transform = function(d) {
    return "translate(" + (plot.scales.x(d.x) + plot.jitters.x()) + ", " + (plot.scales.y(d.y) + plot.jitters.y()) + ")";
  };

  g_points = clip.selectAll(".point").data(data).enter().append("g").attr({
    "class": "point",
    "transform": transform
  });

  points = g_points.append("svg:circle").attr({
    "class": "point_tooltip",
    "r": radius,
    "fill": function(d) {
      return color_scale(d.group);
    },
    "opacity": function(d, i) {
      return opacity;
    },
    "title": function(d) {
      return plot.tooltip_text(d);
    }
  });

  $(".point_tooltip").tooltip({
    html: true,
    container: "body",
    placement: "top"
  });

  point_names = g_points.append("text").text(function(d) {
    return d.point_name;
  }).attr({
    "dy": ".32em",
    "dx": 8,
    "text-anchor": "left",
    "display": "none"
  }).style({
    "fill": function(d) {
      return color_scale(d.group);
    },
    "font-size": "22px"
  });

  if (true) {
    sidebar = plot.right_margin.append("g").attr("transform", "translate(60,0)");
    g_toggle_names = sidebar.append("g").style("cursor", "pointer").style("font-size", "22px").on("click", function() {
      return toggle_names();
    });
    g_toggle_names.append("circle").attr("r", 7).attr("stroke", "black").attr("stroke-width", 2).attr("fill", "white");
    g_toggle_names.append("text").attr('text-anchor', 'start').attr('dy', '.32em').attr('dx', '12').text("Show names (" + data.length + ")");
    toggle_names = function() {
      var showing_point_names;
      showing_point_names = g_toggle_names.classed("show_names");
      point_names.attr("display", function() {
        if (showing_point_names) {
          return "none";
        } else {
          return "inline";
        }
      });
      return g_toggle_names.attr("class", function() {
        if (showing_point_names) {
          return "";
        } else {
          return "show_names";
        }
      }).select("circle").attr("fill", function() {
        if (showing_point_names) {
          return "white";
        } else {
          return "black";
        }
      });
    };
    if (color_scale.range().length > 1) {
      sidebar.append("text").attr({
        "class": "color_title",
        "x": -radius,
        "y": 45,
        "dy": ".35em"
      }).style({
        "font-size": "16px",
        "font-weight": "bold"
      }).text(color_title);
      g_color_legend = sidebar.selectAll(".key").data(color_scale.domain().reverse()).enter().append("g").attr({
        "transform": function(d, i) {
          return "translate(0, " + (i * (radius * 2 + 15) + 70) + ")";
        },
        "class": "key"
      }).style("cursor", "pointer");
      g_color_legend.append("circle").attr({
        "r": radius,
        "fill": color_scale
      }).on("click", function(d) {
        return toggle_points(d);
      });
      g_color_legend.append("text").attr({
        "x": radius + 10,
        "y": 0,
        "dy": ".35em"
      }).text(function(d) {
        return "" + d + " (" + color_legend_counts[d] + ")";
      }).on("click", function(d) {
        return toggle_points(d);
      });
    }
  }

  toggle_points = function(category) {
    g_points.filter(function(d) {
      return d.group === category;
    }).classed("hide", function() {
      return !d3.select(this).classed("hide");
    });
    return g_points.filter(function(d) {
      return d.group !== category;
    }).classed("hide", false);
  };

}).call(this);


    </script>
    <div class = "code">
        
    </div>
  </body>
</html>
