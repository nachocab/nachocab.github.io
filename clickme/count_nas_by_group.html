<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <base target="_blank"> <!-- open all links on a new tab -->

    <title>Dengue arrays by group</title>

    <link href="clickme_assets/clickme.css" rel="stylesheet">
<link href="clickme_assets/tooltip.css" rel="stylesheet">
<link href="clickme_assets/Points/points.css" rel="stylesheet">
<script src="clickme_assets/d3.v3.2.7.js"></script>
<script src="clickme_assets/jquery.v1.8.3.min.js"></script>
<script src="clickme_assets/bootstrap-tooltip.v2.3.0.js"></script>
<script src="clickme_assets/d3_aux.js"></script>

    <style>
        text{
            font-family: Rockwell, Helvetica, Arial, sans;
        }
    </style>
  </head>

  <body>
    <div class="g-search">
        <input type="text" placeholder="Searchâ€¦">
        <button style="display:none;" class="g-search-clear">X</button>
    </div>
    <script type="text/javascript">
(function() {
  var clip, color_legend_counts, color_scale, color_title, data, deselect_color_groups, distance_between_show_names_and_color_groups, g_color_group_keys, g_color_title, g_points, g_toggle_names, keyuped, mouseout, mouseover, opacity, plot, point_names, points, redraw, search, search_clear, search_input, show_all_colors, sidebar, single_group, static_radius, toggle_names, toggle_points, transform;

  data = [{"x":84,"y":4063,"point_name":"d84","radius":5,"group_id":"DKE10","initial_challenge":"jev","sample_name":"08806","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":83,"y":5096,"point_name":"d83","radius":5,"group_id":"DKE10","initial_challenge":"jev","sample_name":"08806","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":82,"y":5199,"point_name":"d82","radius":5,"group_id":"DKE10","initial_challenge":"jev","sample_name":"08806","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":81,"y":7804,"point_name":"d81","radius":5,"group_id":"DKE10","initial_challenge":"jev","sample_name":"08806","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":80,"y":16985,"point_name":"d80","radius":5,"group_id":"DKE9","initial_challenge":"jev","sample_name":"27721","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":79,"y":6108,"point_name":"d79","radius":5,"group_id":"DKE9","initial_challenge":"jev","sample_name":"27721","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":78,"y":5631,"point_name":"d78","radius":5,"group_id":"DKE9","initial_challenge":"jev","sample_name":"27721","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":77,"y":5862,"point_name":"d77","radius":5,"group_id":"DKE9","initial_challenge":"jev","sample_name":"27721","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":76,"y":6022,"point_name":"d76","radius":5,"group_id":"DKE8","initial_challenge":"denv4","sample_name":"88149","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":75,"y":5299,"point_name":"d75","radius":5,"group_id":"DKE8","initial_challenge":"denv4","sample_name":"88149","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":74,"y":5997,"point_name":"d74","radius":5,"group_id":"DKE8","initial_challenge":"denv4","sample_name":"88149","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":73,"y":9782,"point_name":"d73","radius":5,"group_id":"DKE8","initial_challenge":"denv4","sample_name":"88149","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"4/17/13","color_group":"DKE"},
{"x":72,"y":828,"point_name":"d72","radius":5,"group_id":"DKE7","initial_challenge":"denv4","sample_name":"67000","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":71,"y":1635,"point_name":"d71","radius":5,"group_id":"DKE7","initial_challenge":"denv4","sample_name":"67000","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":70,"y":1583,"point_name":"d70","radius":5,"group_id":"DKE7","initial_challenge":"denv4","sample_name":"67000","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":69,"y":3042,"point_name":"d69","radius":5,"group_id":"DKE7","initial_challenge":"denv4","sample_name":"67000","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":68,"y":386,"point_name":"d68","radius":5,"group_id":"DKE4","initial_challenge":"denv2","sample_name":"76090","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":67,"y":964,"point_name":"d67","radius":5,"group_id":"DKE4","initial_challenge":"denv2","sample_name":"76090","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":66,"y":1185,"point_name":"d66","radius":5,"group_id":"DKE4","initial_challenge":"denv2","sample_name":"76090","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":65,"y":2018,"point_name":"d65","radius":5,"group_id":"DKE4","initial_challenge":"denv2","sample_name":"76090","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":64,"y":559,"point_name":"d64","radius":5,"group_id":"DKE3","initial_challenge":"denv2","sample_name":"76192","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":63,"y":1473,"point_name":"d63","radius":5,"group_id":"DKE3","initial_challenge":"denv2","sample_name":"76192","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":62,"y":1261,"point_name":"d62","radius":5,"group_id":"DKE3","initial_challenge":"denv2","sample_name":"76192","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":61,"y":2596,"point_name":"d61","radius":5,"group_id":"DKE3","initial_challenge":"denv2","sample_name":"76192","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":60,"y":772,"point_name":"d60","radius":5,"group_id":"DKE2","initial_challenge":"denv1","sample_name":"66185","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":59,"y":2427,"point_name":"d59","radius":5,"group_id":"DKE2","initial_challenge":"denv1","sample_name":"66185","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":58,"y":1682,"point_name":"d58","radius":5,"group_id":"DKE2","initial_challenge":"denv1","sample_name":"66185","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":57,"y":2077,"point_name":"d57","radius":5,"group_id":"DKE2","initial_challenge":"denv1","sample_name":"66185","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":56,"y":761,"point_name":"d56","radius":5,"group_id":"DKE1","initial_challenge":"denv1","sample_name":"78118","Cy3":14,"rechallenge_date":"7/24/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":55,"y":988,"point_name":"d55","radius":5,"group_id":"DKE1","initial_challenge":"denv1","sample_name":"78118","Cy3":7,"rechallenge_date":"7/17/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":54,"y":1688,"point_name":"d54","radius":5,"group_id":"DKE1","initial_challenge":"denv1","sample_name":"78118","Cy3":3,"rechallenge_date":"7/13/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":53,"y":1162,"point_name":"d53","radius":5,"group_id":"DKE1","initial_challenge":"denv1","sample_name":"78118","Cy3":0,"rechallenge_date":"7/10/12","scan_date":"1/29/13","color_group":"DKE"},
{"x":52,"y":48,"point_name":"d52","radius":5,"group_id":"BU24","initial_challenge":"yfv","sample_name":"Tails","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/29/13","color_group":"BU"},
{"x":51,"y":147,"point_name":"d51","radius":5,"group_id":"BU24","initial_challenge":"yfv","sample_name":"Tails","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/29/13","color_group":"BU"},
{"x":50,"y":114,"point_name":"d50","radius":5,"group_id":"BU24","initial_challenge":"yfv","sample_name":"Tails","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/29/13","color_group":"BU"},
{"x":49,"y":2061,"point_name":"d49","radius":5,"group_id":"BU24","initial_challenge":"yfv","sample_name":"Tails","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/29/13","color_group":"BU"},
{"x":48,"y":2,"point_name":"d48","radius":5,"group_id":"BU23","initial_challenge":"yfv","sample_name":"Sonic","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/25/13","color_group":"BU"},
{"x":47,"y":57,"point_name":"d47","radius":5,"group_id":"BU23","initial_challenge":"yfv","sample_name":"Sonic","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/25/13","color_group":"BU"},
{"x":46,"y":12,"point_name":"d46","radius":5,"group_id":"BU23","initial_challenge":"yfv","sample_name":"Sonic","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/25/13","color_group":"BU"},
{"x":45,"y":63,"point_name":"d45","radius":5,"group_id":"BU23","initial_challenge":"yfv","sample_name":"Sonic","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/25/13","color_group":"BU"},
{"x":44,"y":4,"point_name":"d44","radius":5,"group_id":"BU21","initial_challenge":"yfv","sample_name":"Jeep","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/25/13","color_group":"BU"},
{"x":43,"y":97,"point_name":"d43","radius":5,"group_id":"BU21","initial_challenge":"yfv","sample_name":"Jeep","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/25/13","color_group":"BU"},
{"x":42,"y":29,"point_name":"d42","radius":5,"group_id":"BU21","initial_challenge":"yfv","sample_name":"Jeep","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/25/13","color_group":"BU"},
{"x":41,"y":228,"point_name":"d41","radius":5,"group_id":"BU21","initial_challenge":"yfv","sample_name":"Jeep","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/25/13","color_group":"BU"},
{"x":40,"y":2,"point_name":"d40","radius":5,"group_id":"BU16","initial_challenge":"denv4","sample_name":"Applebee","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/25/13","color_group":"BU"},
{"x":39,"y":88,"point_name":"d39","radius":5,"group_id":"BU16","initial_challenge":"denv4","sample_name":"Applebee","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/25/13","color_group":"BU"},
{"x":38,"y":141,"point_name":"d38","radius":5,"group_id":"BU16","initial_challenge":"denv4","sample_name":"Applebee","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/25/13","color_group":"BU"},
{"x":37,"y":147,"point_name":"d37","radius":5,"group_id":"BU16","initial_challenge":"denv4","sample_name":"Applebee","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/25/13","color_group":"BU"},
{"x":36,"y":8,"point_name":"d36","radius":5,"group_id":"BU13","initial_challenge":"denv4","sample_name":"Franconia","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/25/13","color_group":"BU"},
{"x":35,"y":20,"point_name":"d35","radius":5,"group_id":"BU13","initial_challenge":"denv4","sample_name":"Franconia","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/25/13","color_group":"BU"},
{"x":34,"y":13,"point_name":"d34","radius":5,"group_id":"BU13","initial_challenge":"denv4","sample_name":"Franconia","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/25/13","color_group":"BU"},
{"x":33,"y":86,"point_name":"d33","radius":5,"group_id":"BU13","initial_challenge":"denv4","sample_name":"Franconia","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/25/13","color_group":"BU"},
{"x":32,"y":4,"point_name":"d32","radius":5,"group_id":"BU12","initial_challenge":"denv3","sample_name":"Lexus","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/25/13","color_group":"BU"},
{"x":31,"y":26,"point_name":"d31","radius":5,"group_id":"BU12","initial_challenge":"denv3","sample_name":"Lexus","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/25/13","color_group":"BU"},
{"x":30,"y":5,"point_name":"d30","radius":5,"group_id":"BU12","initial_challenge":"denv3","sample_name":"Lexus","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/25/13","color_group":"BU"},
{"x":29,"y":25,"point_name":"d29","radius":5,"group_id":"BU12","initial_challenge":"denv3","sample_name":"Lexus","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/25/13","color_group":"BU"},
{"x":28,"y":102,"point_name":"d28","radius":5,"group_id":"BU11","initial_challenge":"denv3","sample_name":"Lambagini","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/25/13","color_group":"BU"},
{"x":27,"y":11,"point_name":"d27","radius":5,"group_id":"BU11","initial_challenge":"denv3","sample_name":"Lambagini","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/25/13","color_group":"BU"},
{"x":26,"y":6,"point_name":"d26","radius":5,"group_id":"BU11","initial_challenge":"denv3","sample_name":"Lambagini","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/25/13","color_group":"BU"},
{"x":25,"y":65,"point_name":"d25","radius":5,"group_id":"BU11","initial_challenge":"denv3","sample_name":"Lambagini","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/25/13","color_group":"BU"},
{"x":24,"y":464,"point_name":"d24","radius":5,"group_id":"BU10","initial_challenge":"denv3","sample_name":"Squam","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/24/13","color_group":"BU"},
{"x":23,"y":250,"point_name":"d23","radius":5,"group_id":"BU10","initial_challenge":"denv3","sample_name":"Squam","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/24/13","color_group":"BU"},
{"x":22,"y":235,"point_name":"d22","radius":5,"group_id":"BU10","initial_challenge":"denv3","sample_name":"Squam","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/24/13","color_group":"BU"},
{"x":21,"y":198,"point_name":"d21","radius":5,"group_id":"BU10","initial_challenge":"denv3","sample_name":"Squam","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/24/13","color_group":"BU"},
{"x":20,"y":816,"point_name":"d20","radius":5,"group_id":"BU9","initial_challenge":"denv3","sample_name":"Winnie","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/24/13","color_group":"BU"},
{"x":19,"y":683,"point_name":"d19","radius":5,"group_id":"BU9","initial_challenge":"denv3","sample_name":"Winnie","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/24/13","color_group":"BU"},
{"x":18,"y":308,"point_name":"d18","radius":5,"group_id":"BU9","initial_challenge":"denv3","sample_name":"Winnie","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/24/13","color_group":"BU"},
{"x":17,"y":291,"point_name":"d17","radius":5,"group_id":"BU9","initial_challenge":"denv3","sample_name":"Winnie","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/24/13","color_group":"BU"},
{"x":16,"y":328,"point_name":"d16","radius":5,"group_id":"BU8","initial_challenge":"denv2","sample_name":"Dunkin","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/24/13","color_group":"BU"},
{"x":15,"y":289,"point_name":"d15","radius":5,"group_id":"BU8","initial_challenge":"denv2","sample_name":"Dunkin","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/24/13","color_group":"BU"},
{"x":14,"y":452,"point_name":"d14","radius":5,"group_id":"BU8","initial_challenge":"denv2","sample_name":"Dunkin","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/24/13","color_group":"BU"},
{"x":13,"y":560,"point_name":"d13","radius":5,"group_id":"BU8","initial_challenge":"denv2","sample_name":"Dunkin","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/24/13","color_group":"BU"},
{"x":12,"y":1768,"point_name":"d12","radius":5,"group_id":"BU7","initial_challenge":"denv2","sample_name":"Krispy","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/24/13","color_group":"BU"},
{"x":11,"y":725,"point_name":"d11","radius":5,"group_id":"BU7","initial_challenge":"denv2","sample_name":"Krispy","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/24/13","color_group":"BU"},
{"x":10,"y":840,"point_name":"d10","radius":5,"group_id":"BU7","initial_challenge":"denv2","sample_name":"Krispy","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/24/13","color_group":"BU"},
{"x":9,"y":1198,"point_name":"d9","radius":5,"group_id":"BU7","initial_challenge":"denv2","sample_name":"Krispy","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/24/13","color_group":"BU"},
{"x":8,"y":862,"point_name":"d8","radius":5,"group_id":"BU3","initial_challenge":"denv1","sample_name":"Chevy","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/24/13","color_group":"BU"},
{"x":7,"y":631,"point_name":"d7","radius":5,"group_id":"BU3","initial_challenge":"denv1","sample_name":"Chevy","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/24/13","color_group":"BU"},
{"x":6,"y":374,"point_name":"d6","radius":5,"group_id":"BU3","initial_challenge":"denv1","sample_name":"Chevy","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/24/13","color_group":"BU"},
{"x":5,"y":576,"point_name":"d5","radius":5,"group_id":"BU3","initial_challenge":"denv1","sample_name":"Chevy","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/24/13","color_group":"BU"},
{"x":4,"y":642,"point_name":"d4","radius":5,"group_id":"BU1","initial_challenge":"denv1","sample_name":"Jelly","Cy3":14,"rechallenge_date":"12/18/12","scan_date":"1/24/13","color_group":"BU"},
{"x":3,"y":727,"point_name":"d3","radius":5,"group_id":"BU1","initial_challenge":"denv1","sample_name":"Jelly","Cy3":7,"rechallenge_date":"12/11/12","scan_date":"1/24/13","color_group":"BU"},
{"x":2,"y":806,"point_name":"d2","radius":5,"group_id":"BU1","initial_challenge":"denv1","sample_name":"Jelly","Cy3":3,"rechallenge_date":"12/7/12","scan_date":"1/24/13","color_group":"BU"},
{"x":1,"y":266,"point_name":"d1","radius":5,"group_id":"BU1","initial_challenge":"denv1","sample_name":"Jelly","Cy3":0,"rechallenge_date":"12/4/12","scan_date":"1/24/13","color_group":"BU"}];

  color_scale = d3.scale.ordinal().range(["#d62728","#24A5F9"]);

  static_radius = 5;

  opacity = 1;

  color_title = "Group";

  color_legend_counts = {"BU":52,"DKE":32};

  distance_between_show_names_and_color_groups = 80;

  plot = new_plot({
    width: 500,
    height: 500,
    padding: {"top":150,"right":400,"bottom":70,"left":100},
    title: "Dengue arrays by group",
    subtitle: null,
    xlab: "Array number",
    ylab: "Number of scanning errors",
    rotate_label: {
      y: true
    },
    xlim: null,
    ylim: null,
    data_ranges: {
          x: [1,84],
          y: [2,16985]
        },
    categorical_domains: {
          x: null,
          y: null
        },
    jitter: 0,
    hide_x_tick_labels: false,
    ordinal_scale_padding: 1,
    linear_scale_padding: 40
  });

  plot.center.append("defs").append("clipPath").attr("id", "clip").append("rect").attr({
    "width": plot.width,
    "height": plot.height
  });

  clip = plot.center.append("g").attr("clip-path", "url(#clip)");

  if (plot.zoom) {
    clip.append("rect").style({
      "cursor": "move"
    }).attr({
      "class": "overlay",
      "width": plot.width,
      "height": plot.height,
      "fill": "none",
      "pointer-events": "all"
    }).call(d3.behavior.zoom().x(plot.scales.x).y(plot.scales.y).scaleExtent([1, Infinity]).on("zoom", function() {
      return redraw();
    }));
    redraw = function() {
      plot.select(".x.axis").call(plot.axes.x);
      plot.select(".y.axis").call(plot.axes.y);
      return g_points.attr("transform", transform);
    };
  }

  transform = function(d) {
    return "translate(" + (plot.scales.x(d.x) + plot.jitters.x()) + ", " + (plot.scales.y(d.y) + plot.jitters.y()) + ")";
  };

  g_points = clip.selectAll(".point").data(data).enter().append("g").attr({
    "class": "point",
    "transform": transform
  });

  points = g_points.append("svg:circle").attr({
    "r": function(d) {
      return d.radius;
    },
    "fill": function(d) {
      return color_scale(d.color_group);
    },
    "opacity": function(d, i) {
      return opacity;
    },
    "title": function(d) {
      return "<table><tr><td colspan='2' class='tooltip-title'>" + d.point_name + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>Array number</td><td class='tooltip-metric-value'>" + d['x'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>Number of scanning errors</td><td class='tooltip-metric-value'>" + d['y'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>group_id</td><td class='tooltip-metric-value'>" + d['group_id'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>initial_challenge</td><td class='tooltip-metric-value'>" + d['initial_challenge'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>sample_name</td><td class='tooltip-metric-value'>" + d['sample_name'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>Cy3</td><td class='tooltip-metric-value'>" + d['Cy3'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>rechallenge_date</td><td class='tooltip-metric-value'>" + d['rechallenge_date'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>scan_date</td><td class='tooltip-metric-value'>" + d['scan_date'] + "</td></tr><tr class='tooltip-metric'><td class='tooltip-metric-name'>Group</td><td class='tooltip-metric-value'>" + d['color_group'] + "</td></tr><tr><td colspan='2' class='tooltip-title'>" + d.point_name + "</td></tr></table>";
    }
  });

  $(".point circle").tooltip({
    html: true,
    container: "body",
    placement: "top"
  });

  point_names = g_points.append("text").text(function(d) {
    return d.point_name;
  }).attr({
    "dy": ".32em",
    "dx": 8,
    "text-anchor": "left",
    "display": "none"
  }).style({
    "fill": function(d) {
      return color_scale(d.color_group);
    },
    "font-size": "22px"
  });

  if (true) {
    sidebar = plot.right_margin.append("g").attr("transform", "translate(60,0)");
    g_toggle_names = sidebar.append("g").style("cursor", "pointer").style("font-size", "22px").on("click", function() {
      return toggle_names();
    });
    g_toggle_names.append("circle").attr("r", 7).attr("stroke", "black").attr("stroke-width", 2).attr("fill", "white");
    g_toggle_names.append("text").attr('text-anchor', 'start').attr('dy', '.32em').attr('dx', '12').text("Show names (" + data.length + ")");
    toggle_names = function() {
      var showing_point_names;
      showing_point_names = g_toggle_names.classed("show_names");
      point_names.attr("display", function() {
        if (showing_point_names) {
          return "none";
        } else {
          return "inline";
        }
      });
      return g_toggle_names.attr("class", function() {
        if (showing_point_names) {
          return "";
        } else {
          return "show_names";
        }
      }).select("circle").attr("fill", function() {
        if (showing_point_names) {
          return "white";
        } else {
          return "black";
        }
      });
    };
    if (color_scale.range().length > 1) {
      g_color_title = sidebar.append("text").attr({
        "x": -static_radius,
        "y": distance_between_show_names_and_color_groups,
        "dy": ".35em"
      });
      g_color_title.append("tspan").style({
        "font-size": "16px",
        "font-weight": "bold"
      }).text(color_title);
      if (color_scale.range().length > 2) {
        single_group = g_color_title.append("tspan").attr({
          "fill": "#949494",
          "dx": "20px"
        }).style({
          "font-size": "16px",
          "font-weight": "bold"
        }).text("Show one").on("click", function() {
          return deselect_color_groups();
        });
      }
      g_color_group_keys = sidebar.selectAll(".color_group_key").data(color_scale.domain().reverse()).enter().append("g").attr({
        "transform": function(d, i) {
          return "translate(0, " + (i * (static_radius * 2 + 15) + distance_between_show_names_and_color_groups + 30) + ")";
        },
        "class": "color_group_key"
      }).style("cursor", "pointer");
      g_color_group_keys.append("circle").attr({
        "r": static_radius,
        "fill": color_scale
      }).on("click", function(d) {
        return toggle_points(d);
      });
      g_color_group_keys.append("text").attr({
        "x": static_radius + 10,
        "y": 0,
        "dy": ".35em"
      }).text(function(d) {
        return "" + d + " (" + color_legend_counts[d] + ")";
      }).on("click", function(d) {
        return toggle_points(d);
      });
    }
  }

  show_all_colors = function() {
    g_points.classed("hide", false);
    g_color_group_keys.classed("hide", false);
    return single_group.text("Show one");
  };

  toggle_points = function(category) {
    var categories;
    g_points.filter(function(d) {
      return d.color_group === category;
    }).classed("hide", function() {
      return !d3.select(this).classed("hide");
    });
    g_color_group_keys.filter(function(d) {
      return d === category;
    }).classed("hide", function() {
      return !d3.select(this).classed("hide");
    });
    categories = g_points.filter(":not(.hide)").data().map(function(d) {
      return d.color_group;
    }).unique();
    if (categories.length === 0) {
      return show_all_colors();
    } else if (categories.length === 1) {
      return single_group.text("Show all");
    } else {
      return single_group.text("Show one");
    }
  };

  deselect_color_groups = function() {
    var categories, visible_category, visible_points;
    visible_points = g_points.filter(":not(.hide)");
    categories = visible_points.data().map(function(d) {
      return d.color_group;
    }).unique();
    if (single_group.text() === "Show one") {
      visible_category = categories.reverse()[0];
      g_points.filter(function(d) {
        return d.color_group !== visible_category;
      }).classed("hide", true);
      g_color_group_keys.filter(function(d) {
        return d !== visible_category;
      }).classed("hide", true);
      return single_group.text("Show all");
    } else {
      return show_all_colors();
    }
  };

  d3.select(".g-search").style({
    "top": "" + (g_toggle_names.node().getBoundingClientRect().top + distance_between_show_names_and_color_groups / 2) + "px",
    "left": "" + (g_toggle_names.node().getBoundingClientRect().left) + "px"
  });

  keyuped = function() {
    if (d3.event.keyCode === 27) {
      this.value = "";
    }
    return search(this.value.trim());
  };

  search = function(value) {
    var matches, re;
    if (value) {
      console.log(d3.requote(value));
      re = new RegExp("" + (d3.requote(value)), "i");
      clip.classed("g-searching", true);
      if (sidebar.selectAll(".color_group_key").size() > 0) {
        g_color_group_keys.classed("hide", false);
        g_points.classed("hide", false);
      }
      g_points.classed("g-match", function(d) {
        return re.test(d.point_name);
      });
      matches = d3.selectAll(".g-match");
      if (matches[0].length === 1) {
        mouseover(matches.datum());
      } else {
        mouseout();
      }
      return search_clear.style("display", null);
    } else {
      mouseout();
      clip.classed("g-searching", false);
      g_points.classed("g-match", false);
      return search_clear.style("display", "none");
    }
  };

  mouseover = function(d) {
    points.filter(function(c) {
      return c === d;
    }).classed("g-active", true);
    return $(".g-active").tooltip("show");
  };

  mouseout = function() {
    $(".g-active").tooltip("hide");
    return points.filter(".g-active").classed("g-active", false);
  };

  search_input = d3.select(".g-search input").on("keyup", keyuped);

  search_clear = d3.select(".g-search .g-search-clear").on("click", function() {
    search_input.property("value", "");
    return search();
  });

}).call(this);


    </script>
  </body>
</html>
